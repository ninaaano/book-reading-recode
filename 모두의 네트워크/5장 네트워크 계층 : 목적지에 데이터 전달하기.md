**목표**

- IP 이해
- 라우터 이해
- IP 주소 이해
- 서브넷 이해
- 라우팅 이해

## LESSON 17 네트워크 계층의 역할

데이터 링크 계층에서는 이더넷 규칙을 기반으로 데이터의 전송을 담당한다. 이 규칙에 따라 같은 네트워크에 있는 컴퓨터로는 데이터를 전송할 수 있지만, 인터넷이나 다른 네트워크로는 데이터를 전송할 수 없다

수많은 네트워크가 연결된 환경에서 데이터 링크 계층의 기능만으로는 다른 네트워크로 데이터를 전송하기 힘들다

네트워크 간의 통신을 가능하게 하는 것이 네트워크 계층의 역할이다. 이 계층을 통해 다른 네트워크로 데이터를 전송하려면 `라우터`라는 네트워크 장비가 필요하다

라우터는 데이터의 목적지가 정해지면 해당 목적지까지 어떤 경로로 가는 것이 좋은지를 알려주는 기능을 한다

하지만 데이터를 보내려는 상대가 어디에 있는지 모르면 라우터도 목적지까지의 경로를 알려주지 못한다

IP주소로 식별한다

IP 주소는 어떤 네트워크의 어떤 컴퓨터 인지 구분할 수 있도록 하는 주소이다. 이 주소가 있으면 다른 네트워크에 있는 목적지를 지정할 수 있다

IP주소로 목적지를 지정하는 것 뿐 아니라 데이터를 어떤 경로로 보낼지도 결정해야한다. 이처럼 목적지 IP 주소까지 어떤 경로로 데이터를 보낼지 결정하는 것을 라우팅이라고 한다

라우팅은 라우터라는 장비가 한다. 레이어 3 스위치라는 장비도 라우팅을 할수 있긴함

> 레이어 3 스위치
네트워크를 분할하여 라우팅을 할 수 있는 네트워크 장비
> 

라우터에는 라우팅 테이블이 있어서 경로 정보를 등록하고 관리한다

### IP 란?

네트워크 계층에서는 캡슐화 할때 IP 헤더를 붙인다. 버전, 헤더길이, 서비스 유형, 전체 패킷 길이, ID, 조각 상태, 조각의 위치, TTL, 프로토콜, 헤더 체크섬, 출발지 IP 주소, 목적지 IP 주소 순서로 헤더 정보가 구성되어 있다

출발지 IP 주소와 목적지 IP 주소 정도만 기억하면 된다

IP 프로토콜을 사용하여 캡슐화할 때는 데이터에 IP 헤더가 추가되는데, 이렇게 만들어 진 것을 IP 패킷이라고 한다

데이터 링크 계층에서는 프레임이였는데, 네트워크 계층에서는 IP 패킷이다

### 정리

- 서로 다른 네트워크 간에 통신을 하려면 라우터가 필요하다
- 랜 안에서는 MAC 주소만으로도 통신할 수 있지만 다른 네트워크 간에 통신을 하려면 IP 주소가 필요하다
- 경로를 선택하고 목적지 IP 주소까지 어떻게 데이터를 전달할지 결정하는 것을 라우팅이라고 한다
- 라우터의 라우팅 테이블에는 경로 정보가 등록되어 있다
- 네트워크 계층의 대표적인 프로토콜에는 IP가 있다
- 네트워크 계층에서는 캡슐화할 때 IP 헤더를 추가한다

## LESSON 18 IP 주소의 구조

### IP 주소란?

IP 주소는 인터넷 서비스 제공자(ISP)에게 받을 수 있다

IP 버전에는 IPv4, IPv6가 있다

### IPv4

- 32 비트
- IP 주소를 약 43억개 만들 수 있다
- 인터넷이 널리 보급되면서 IP 부족 현상이 일어남

### IPv6

- IPv4 부족 현상으로 사용되고 있음
- 128비트
- IPv4보다 많은 IP 주소를 만들 수 있다

IP 주소에는 공인 IP 주소와 사설 IP 주소가 있고, 공인 IP 주소는 인터넷 서비스 제공자(ISP)가 제공한다

IP주소가 두 종류 인 것은, 주소 고갈의 문제 때문에 인터넷에 직접 연결되는 컴퓨터나 라우터에는 공인 IP 주소를 할당하고, 회사나 가정의 랜에 있는 컴퓨터는 사설 IP 주소를 할당하는 정책을 사용하고 있다

랜 안에 컴퓨터가 여러대 있다면 공인 IP 주소는 사용할 수 있는 숫자가 제한되므로 컴퓨터 한 대당 공인 IP 주소를 하나씩 할당하기가 어렵다. 그래서 우선 인터넷 서비스 공급자가 제공하는 공인 IP 주소는 라우터에만 할당하고, 랜 안에 있는 컴퓨터에는 랜의 네트워크 관리자가 자유롭게 사실 IP 주소를 할당하거나 라우터의 DHCP 기능을 사용하여 주소를 자동으로 할당하고 있다

> DHCP?
Dynamic Host Configuration Protocol의 약어로 IP 주소를 자동으로 할당하는 프로토콜
>


공인 IP 주소와 사설 IP 주소는 모두 2진수의 32비트를 동일하게 사용하고 있다

MAC 주소는 48비트로 구분하기 쉽도록 16진수로 표시하고, IP 주소는 32 비트로 구분하기 쉽도록 10진수로 표시한다

컴퓨터 이해할 수 있으려면 2진수가 필요하지만 사람도 쉽게 읽기 귀해 비트 단위로 나눠서 표시하는데, 8비트를 옥텟(octet)이라고 부른다

### 정리

- 데이터를 다른 네트워크로 전달하려면 IP 주소가 필요하다
- IP 주소는 인터넷 서비스 공급자에게 할당받을 수 있다
- IPv4의 IP 주소는 32비트, IPv6의 IP 주소는 128비트로 구성되어 있다
- IP 주소의 종류에는 공인 IP 주소와 사설 IP 주소가 있다
- IP 주소는 네트워크 ID와 호스트 ID 로 나누어진다

## LESSON 19 IP 주소의 클래스 구조

IP 주소는 네트워크의 규모에 따라 A~E 클래스로 나누어져 있다.

IPv4의 IP 주소는 32비트이다. 비트로 구분하지만 네트워크 ID를 크게 만들거나, 호스트 ID를 작게 만들어서 네트워크 크기를 조정할 수 있다.

네트워크 크기는 클래스라는 개념으로 구분한다

사설 IP 주소는 절대 공인 IP 주소로 사용할 수 없다

윈도우 명령 프롬프트에서 ipconfig 명령어를 통해 본인의 IP 주소를 확인 할 수 있다

## LESSON 20 네트워크 주소와 브로드캐스트 주소의 구조

컴퓨터에 할당할 수 없는 IP 주소인 네트워크 주소와 브로드캐스트 주소에 대해 알아보자!

네트워크 주소와 브로드캐스트 주소, 이 두 주소는 특별한 주소로 컴퓨터나 라우터가 자신의 IP로 사용하면 안되는 주소이다

- 네트워크 주소
    - 전체 네트워크에서 작은 네트워크를 식별하는데 사용됨
    - 호스트 ID가 10진수로 0이면 그 네트워크 전체를 대표하는 주소가 된다
    - 쉽게 말해, 전체 네트워크의 대표 주소
- 브로드캐스트 주소
    - 네트워크에 있는 컴퓨터나 장비 모두에게 한 번에 데이터를 전송하는데 사용되는 전용 IP 주소이다

## LESSON 21 서브넷의 구조

네트워크를 분할하는 것을 서브넷팅이라고 한다

A 클래스는 네트워크 ID가 8 비트에 호스트 ID가 24 비트

B 클래스는 네트워크 ID가 16 비트에 호스트 ID가 16 비트

C 클래스는 네트워크 ID가 24 비트에 호스트 ID가 8 비트

### 서브넷이란?

대규모 네트워크를 작은 네트워크로 분할하여 브로드캐스트로 전송되는 패킷의 범위를 좁힐 수 있다. 이렇게하면 더 많은 네트워크를 만들 수 있어서 IP 주소를 더 효과적으로 사용할 수 있다.

이처럼 네트워크를 분할하는 것을 서브넷팅이라고 하고, 분할된 네트워크를 서브넷 이라고 한다

예를 들어, A 클래스를 서브넷팅하여 작은 네트워크로 분할하는데, 기존에 있던 네트워크 ID와 호스트 ID로 구성되어 있던 것이 네트워크 ID, 서브넷 ID, 호스트 ID로 나누어지게 된다

호스트 ID에서 비트를 빌려 서브넷으로 만들 수 있다

### 서브넷 마스크란?

IP 주소를 서브넷팅하면 어디까지가 네트워크 ID고 어디부터가 호스트 ID인지 판단하기 어려울때가 있는데 이럴 땐 서브넷 마스크라는 값을 사용한다

서브넷 마스크란, 네트워크 ID와 호스트 ID를 식별하기 위한 값이다.

프리픽스(prefix) 표기법으로도 사용할 수 있다.

프리픽스 표기법은 다음과 같이 서브넷 마스크를 슬래시(/비트 수)로 나타낸 것을 말한다. 예를 들어 255.255.255.0/24가 된다